---
title: "Final Project"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
---

```{r setup, include=FALSE}
#install.packages("mapcan")
library(flexdashboard)
library(here)
library(readxl)
library(mapcan)
library(tidyverse)
```

``` {r prep}
composition_data <- read_excel(here("data", "class_size_composition.xlsx")) %>% 
  filter(DATA_LEVEL == "DISTRICT LEVEL",
         GRADE_GROUP == "All Grades")

districting <- read_excel(here("data", "DataVizfinal_names.xlsx")) %>% 
  select(SD,
         DISTRICT_NAME,
         riding_name_english)

combinednames <- full_join(composition_data, districting, by = "DISTRICT_NAME") 

```


Page One
===============================

Column {data-width=650}
-----------------------------------------------------------------------

### Chart A

```{r setMap}
BC_data <- mapcan::census_pop2016 %>% 
  select(population_2016,
         pr_english,
         population_density_2016,
         born_outside_canada,
         census_division_name) %>% 
  filter(pr_english == "British Columbia") %>% 
    mapcan(boundaries = ridings,
          type = standard,
          province = BC)

IEPex1 <- combinednames %>% 
   filter(SCHOOL_YEAR == "2019/2020") %>% 
  select(NUMBER_CLASSES_0_IEP,
         NUMBER_CLASSES_1_ELL,
         riding_name_english) %>% 
  group_by(riding_name_english) %>% 
  summarise(NUMBER_CLASSES_1_ELL = sum(NUMBER_CLASSES_1_ELL)) %>% 
  full_join(BC_data, by = "riding_name_english")

ggplot(IEPex1, aes(x = long, y = lat, group = group, fill = NUMBER_CLASSES_1_ELL)) +
  geom_polygon() +
  coord_fixed() +
  theme_mapcan()

```

Page Two
=============================

Column {data-width=350}
-----------------------------------------------------------------------

### Chart B

```{r}

```

### Chart C

```{r}

```

